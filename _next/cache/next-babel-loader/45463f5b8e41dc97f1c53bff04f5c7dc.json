{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport Head from \"next/head\";\nimport Nav from \"../components/nav\";\nconst canvasWidth = 1920;\nconst canvasHeight = 1274;\nconst wheelWidth = 740;\nconst wheelHeight = 744;\nlet wheelDeg = 0;\nlet canvas = {};\nlet wheelImage = {};\n\nconst getRatio = () => {\n  const canvasWidth = 1920;\n  return window.innerWidth / canvasWidth;\n};\n\nconst toRadian = deg => {\n  return deg * Math.PI / 180;\n};\n\nconst drawCar = (carCtx, angle) => {\n  const carRadius = 40;\n  const wheelRadius = wheelImage.imageWidth / 2;\n  const r = wheelRadius + carRadius; //wheelRadius + 20;\n\n  const xPos = Math.cos(toRadian(angle)) * r;\n  const yPos = Math.sin(toRadian(angle)) * r;\n  carCtx.save();\n  carCtx.beginPath();\n  carCtx.arc(xPos + wheelImage.imageX + r - carRadius, yPos + wheelImage.imageY + r - carRadius, carRadius, 0, Math.PI, false);\n  carCtx.fillStyle = '#272e59';\n  carCtx.strokeStyle = '#272e59';\n  carCtx.lineWidth = 10;\n  carCtx.fill();\n  carCtx.beginPath();\n  carCtx.arc(xPos + wheelImage.imageX + r - carRadius, yPos + wheelImage.imageY + r - carRadius, carRadius, 0, Math.PI * 2, false);\n  carCtx.strokeStyle = '#272e59';\n  carCtx.lineWidth = 10;\n  carCtx.stroke(); // carCtx.beginPath();\n  // carCtx.arc(wheelImage.imageX + r - carRadius, wheelImage.imageY + r - carRadius, r, 0, Math.PI *2, false);\n  // carCtx.strokeStyle = '#dd4b39';\n  // carCtx.lineWidth = 5;\n  // carCtx.stroke();\n\n  carCtx.restore();\n};\n\nconst drawWheel = () => {\n  const wheelCtx = canvas.wheelCtx;\n  const carCanvas = document.getElementById('carCanvas');\n  const carCtx = carCanvas.getContext('2d');\n  wheelCtx.clearRect(0, 0, canvas.wheelCanvas.width, canvas.wheelCanvas.height);\n  wheelCtx.save();\n  wheelCtx.setTransform(1, 0, 0, 1, 0, 0);\n  wheelCtx.translate(wheelImage.imageX + wheelImage.imageWidth / 2, wheelImage.imageY + wheelImage.imageHeight / 2);\n  wheelCtx.rotate(toRadian(wheelDeg)); // ctx.strokeRect(0 - wheelImage.imageWidth / 2, 0 - wheelImage.imageHeight / 2, wheelImage.imageWidth, wheelImage.imageHeight);\n\n  wheelCtx.drawImage(wheelImage.image, 0 - wheelImage.imageWidth / 2, 0 - wheelImage.imageHeight / 2, wheelImage.imageWidth, wheelImage.imageHeight);\n  carCtx.clearRect(0, 0, carCanvas.width, carCanvas.height);\n\n  for (var i = 0; i < 11; i++) {\n    const carAngle = wheelDeg + i * 36;\n    drawCar(carCtx, carAngle);\n  }\n\n  wheelCtx.restore();\n  wheelDeg = wheelDeg > 360 ? 0 : wheelDeg + 0.05; // wheelDeg = wheelDeg > 360 ? 0 : wheelDeg + 0.5; // 테스트용\n\n  requestAnimationFrame(drawWheel);\n};\n\nconst Home = () => {\n  useEffect(() => {\n    const backgroundImage = {\n      image: new Image(),\n      imageWidth: 1920,\n      imageHeight: 1274,\n      imageX: 1,\n      imageY: 1\n    };\n    const ratio = getRatio();\n    const backgroundCanvas = document.getElementById('backgroundCanvas');\n    const wheelCanvas = document.getElementById('wheelCanvas');\n    canvas = {\n      backgroundCanvas,\n      backgroundCtx: backgroundCanvas.getContext('2d'),\n      wheelCanvas,\n      wheelCtx: wheelCanvas.getContext('2d')\n    };\n\n    backgroundImage.image.onload = () => {\n      canvas.backgroundCtx.drawImage(backgroundImage.image, backgroundImage.imageX, backgroundImage.imageY, backgroundImage.imageWidth, backgroundImage.imageHeight);\n    };\n\n    backgroundImage.image.src = '/static/images/amusement-park.png';\n    wheelImage = {\n      image: new Image(),\n      imageWidth: wheelWidth,\n      imageHeight: wheelHeight,\n      imageX: 765,\n      imageY: 365\n    };\n    wheelImage.image.src = '/static/images/wheel.png';\n    drawWheel();\n  }, []);\n  return __jsx(\"div\", {\n    className: \"jsx-749247884\"\n  }, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-749247884\"\n  }, \"Hisney Land | develope hub page\")), __jsx(\"main\", {\n    className: \"jsx-749247884\" + \" \" + \"contents\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-749247884\" + \" \" + \"title\"\n  }, \"Hisney Land\"), __jsx(\"p\", {\n    className: \"jsx-749247884\" + \" \" + \"description\"\n  }, \"Hub page\"), __jsx(\"div\", {\n    className: \"jsx-749247884\" + \" \" + \"wrap-canvas\"\n  }, __jsx(\"canvas\", {\n    id: \"backgroundCanvas\",\n    width: canvasWidth,\n    height: canvasHeight,\n    className: \"jsx-749247884\" + \" \" + \"background-canvas\"\n  }), __jsx(\"canvas\", {\n    id: \"wheelCanvas\",\n    width: canvasWidth,\n    height: canvasHeight,\n    className: \"jsx-749247884\" + \" \" + \"wheel-canvas\"\n  }), __jsx(\"canvas\", {\n    id: \"carCanvas\",\n    width: canvasWidth,\n    height: canvasHeight,\n    className: \"jsx-749247884\" + \" \" + \"wheel-canvas\"\n  }))), __jsx(_JSXStyle, {\n    id: \"749247884\"\n  }, [\".contents.jsx-749247884{height:100vh;}\", \".wrap-canvas.jsx-749247884{position:relative;}\", \".background-canvas.jsx-749247884,.wheel-canvas.jsx-749247884{position:absolute;left:0;top:0;width:100%;}\", \".background-canvas.jsx-749247884{background-color:#fff;}\", \".title.jsx-749247884{margin:0;width:100%;padding-top:30px;font-size:48px;text-align:center;color:#272e59;}\", \".description.jsx-749247884{text-align:center;}\"]));\n};\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}